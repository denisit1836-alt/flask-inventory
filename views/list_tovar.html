<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Учет товара</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='tables-style.css') }}">
</head>
<body>
    <div class="container">
        <a href="{{ url_for('index') }}" class="button-back">Назад</a>
        <h1 style="text-align: center;">Учет товара</h1>

        <div class="form-add">
            <h2>Добавить новый товар</h2>
            <form method="POST" action="{{ url_for('tovar.create_tovar') }}" autocomplete="off">  <!-- ← Новый URL -->
                <!-- поля без изменений -->
                <div class="form-row">
                    <label>Название товара:</label>
                    <input type="text" name="name" required class="text-field">
                </div>
                <div class="form-row">
                    <label>Категория товара:</label>
                    <input type="text" name="kategor" required class="text-field">
                </div>
                <div class="form-row">
                    <label>Производитель:</label>
                    <input type="text" name="proizv" required class="text-field">
                </div>
                <div class="form-row">
                    <label>Страна производства:</label>
                    <input type="text" name="strana" required class="text-field">
                </div>
                <div class="form-row">
                    <label>Цена:</label>
                    <input type="text" name="cost" required class="text-field">
                </div>
                <div class="form-row">
                    <label>Количество на складе:</label>
                    <input type="text" name="kol_vo" required class="text-field">
                </div>
                <div class="form-row" style="justify-content: center; margin-top: 20px;">
                    <button type="submit" class="button-add">Добавить</button>
                </div>
            </form>
        </div>

        <hr>

        <h2>Товары</h2>
        <table class="all-table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Название товара</th>
                    <th>Категория товара</th>
                    <th>Производитель</th>
                    <th>Страна производства</th>
                    <th>Цена</th>
                    <th>Количество на складе</th>
                    <th>Действия</th>
                </tr>
            </thead>
            <tbody>
                {% for tovar in tovars %}  <!-- ← tovar и tovars вместо prep/preparats -->
                <tr>
                    <form method="post" action="{{ url_for('tovar.update_tovar', tovar_id=tovar.id) }}">  <!-- ← Новый URL -->
                        <td style="text-align: center;">
                            <input type="text" name="id" value="{{ tovar.id }}" disabled class="text-field" style="width: 50px;">
                        </td>
                        <td><input type="text" name="name" value="{{ tovar.name }}" class="text-field"></td>
                        <td><input type="text" name="kategor" value="{{ tovar.kategor }}" class="text-field"></td>
                        <td><input type="text" name="proizv" value="{{ tovar.proizv }}" class="text-field"></td>
                        <td><input type="text" name="strana" value="{{ tovar.strana }}" class="text-field"></td>
                        <td><input type="text" name="cost" value="{{ tovar.cost }}" class="text-field"></td>
                        <td><input type="text" name="kol_vo" value="{{ tovar.kol_vo }}" class="text-field"></td>
                        <td style="text-align: center; white-space: nowrap;">
                            <button type="submit" class="button-redact">Изменить</button>
                            <button type="submit" formaction="{{ url_for('tovar.delete_tovar', tovar_id=tovar.id) }}" class="button-delete">X</button>
                        </td>
                    </form>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</body>
</html>